<!-- Minimal surrounding tags. We want maximum cut-and-paste potential and browsers do well even without them. -->

<div style="width: 95%; height: 600px; width: 1000px;">
<%= @svg.render.split("\n").join("\n  ") %>
</div>

<p>
	The y axis is CRuby's runtime for the benchmark divided by the named interpreter (YJIT, MJIT, TruffleRuby). Shorter bars mean better performance. Each benchmark is scaled to the CRuby's interpreter's mean result.
</p>

<table>
	<thead> <% @headings.each { |heading| %> <th><%= heading %></th> <% } %> </thead>
	<tbody style="text-align: right;">
		<% report_table_data.each do |row| %>
			<tr style="border: 1px solid black;">
				<% row.each_with_index do |cell, idx|
					format = @col_formats[idx]
				%> <td> <%= format % cell %> </td> <% end %>
			</tr>
		<% end %>
	</tbody>
</table>

<p>
	<b>RSD</b> is relative standard deviation - the standard deviation divided by the mean, expressed as a percentage. <br/>
	<b>% in YJIT</b> is the percentage of instructions that complete in YJIT rather than exiting to the non-JITted interpreter. YJIT performs better when this is higher.
</p>

<p>
	You can find our benchmark code <a href="https://github.com/Shopify/yjit-bench">in the yjit-bench Github repo</a>.
	Our benchmark-runner code isn't public yet, but we plan to release it later.
</p>

<p>
	Tested Ruby version for YJIT and No-JIT: <tt><b><%= @ruby_metadata_by_config[@with_yjit_config]["RUBY_DESCRIPTION"] %></b></tt> <br/>
	Tested Ruby version for MJIT: <tt><b><%= @ruby_metadata_by_config[@with_mjit_config]["RUBY_DESCRIPTION"] %></b></tt>
</p>

<% unless @filename_permalinks.empty? %>
<p> Raw JSON data files: (if published) </p>

<ul>
  <% @filename_permalinks.each do |filename, url| %>
    <li><a href="<%= url %>"><%= filename %></a></li>
  <% end %>
</ul>
<% end %>
